(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,t,n){},17:function(e,t,n){var a=n(43),r=a.prototype;r.updateNodesPosition=function(){var e=1,t=1,n=this.getIndex(1),a=this;n.top=e++,n.left=t++,n.children&&n.children.length&&function t(n,r,i,o){var s=1;n.forEach(function(n){var r=a.getIndex(n);o?(r.top=null,r.left=null):(r.top=e++,r.left=i),r.children&&r.children.length?s+=t(r.children,r,i+1,o||r.node.collapsed):(r.height=1,s+=1)});r.node.collapsed?r.height=1:r.height=s;return r.height}(n.children,n,2,n.node.collapsed)},r.move=function(e,t,n){if(e!==t&&1!==t){var a=this.remove(e),r=null;return"before"===n?r=this.insertBefore(a,t):"after"===n?r=this.insertAfter(a,t):"prepend"===n?r=this.prepend(a,t):"append"===n&&(r=this.append(a,t)),this.updateNodesPosition(),r}},r.getNodeByTop=function(e){var t=this.indexes;for(var n in t)if(t.hasOwnProperty(n)&&t[n].top===e)return t[n]},e.exports=a},30:function(e,t,n){e.exports=n(59)},36:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAIAAABvFaqvAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAsSURBVDhPY1Ta6MNADcAEpSkGowYRBqMGEQajBhEGowYRBqMGEQaDzSAGBgBVUAFPn8ivcgAAAABJRU5ErkJggg=="},37:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAIAAABvFaqvAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAsSURBVDhPY2RufcJADcAEpSkGowYRBqMGEQajBhEGowYRBqMGEQaDzSAGBgBjFQGcRxPEQwAAAABJRU5ErkJggg=="},38:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAIAAABvFaqvAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAnSURBVDhPY3gro0IVNGoQYTRqEGE0ahBhNGoQYTRqEGE0bA2SUQEAyfmlX9q5cxgAAAAASUVORK5CYII="},39:function(e,t,n){},41:function(e,t,n){},46:function(e,t,n){},48:function(e,t,n){e.exports=n.p+"static/media/cube-logo-green.a52b5e4a.png"},49:function(e,t,n){e.exports=n.p+"static/media/cube-logo-blue.b600e233.png"},50:function(e,t,n){e.exports=n.p+"static/media/cube-logo-red.5eb5f69f.png"},59:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(9),o=n.n(i),s=n(1),l=n(3),c=n(5),u=n(4),d=n(6),h=n(15),f=n(18),g=n(16),m=n(7),p=n(2),v=n(21),x=new(function(){function e(){var t=this;Object(s.a)(this,e),this.clear=function(e,n,a,r){t.gl.clearColor(e,n,a,r),t.gl.clear(t.gl.COLOR_BUFFER_BIT)},this.viewport=function(){return t.gl.viewport(0,0,t.gl.canvas.width,t.gl.canvas.height)},this.depthTest=function(e){return e?t.gl.enable(t.gl.DEPTH_TEST):t.gl.disable(t.gl.DEPTH_TEST)},this.createBuffer=function(){return t.gl.createBuffer()},this.bindArrayBuffer=function(e){return t.gl.bindBuffer(t.gl.ARRAY_BUFFER,e)},this.unbindArrayBuffer=function(){return t.gl.bindBuffer(t.gl.ARRAY_BUFFER,null)},this.addArrayBufferData=function(e){return t.gl.bufferData(t.gl.ARRAY_BUFFER,new Float32Array(e),t.gl.STATIC_DRAW)},this.bindElementArrayBuffer=function(e){return t.gl.bindBuffer(t.gl.ELEMENT_ARRAY_BUFFER,e)},this.unbindElementArrayBuffer=function(){return t.gl.bindBuffer(t.gl.ELEMENT_ARRAY_BUFFER,null)},this.addElementArrayBufferData=function(e){return t.gl.bufferData(t.gl.ELEMENT_ARRAY_BUFFER,new Uint16Array(e),t.gl.STATIC_DRAW)},this.createVertexShader=function(){return t.gl.createShader(t.gl.VERTEX_SHADER)},this.createFragmentShader=function(){return t.gl.createShader(t.gl.FRAGMENT_SHADER)},this.addShaderSource=function(e,n){return t.gl.shaderSource(e,n)},this.compileShader=function(e){return t.gl.compileShader(e)},this.createShaderProgram=function(){return t.gl.createProgram()},this.attachShaderToProgram=function(e,n){return t.gl.attachShader(e,n)},this.linkProgram=function(e){return t.gl.linkProgram(e)},this.useProgram=function(e){return t.gl.useProgram(e)},this.getAttribLocation=function(e,n){return t.gl.getAttribLocation(e,n)},this.enableVertexAttribArray=function(e){return t.gl.enableVertexAttribArray(e)},this.pointToAttribute=function(e,n){return t.gl.vertexAttribPointer(e,n,t.gl.FLOAT,!1,0,0)},this.drawTriangles=function(e){return t.gl.drawElements(t.gl.TRIANGLES,e,t.gl.UNSIGNED_SHORT,0)},this.uploadMatrix4fv=function(e,n){return t.gl.uniformMatrix4fv(e,!1,n)},this.getUniformLocation=function(e,n){return t.gl.getUniformLocation(e,n)},this.uploadVec3f=function(e,n){return t.gl.uniform3fv(e,n)},this.uploadFloat=function(e,n){return t.gl.uniform1f(e,n)},this.uploadInt=function(e,n){return t.gl.uniform1i(e,n)},this.uploadBool=function(e,n){return t.gl.uniform1i(e,n?1:0)},this.createTexture=function(){return t.gl.createTexture()},this.bindTexture=function(e){return t.gl.bindTexture(t.gl.TEXTURE_2D,e)},this.activeTexture=function(e){return t.gl.activeTexture(t.gl.TEXTURE0+e)},this.defineTexture=function(e){return t.gl.texImage2D(t.gl.TEXTURE_2D,0,t.gl.RGBA,t.gl.RGBA,t.gl.UNSIGNED_BYTE,e)},this.defineDummyTexture=function(){return t.gl.texImage2D(t.gl.TEXTURE_2D,0,t.gl.RGBA,1,1,0,t.gl.RGBA,t.gl.UNSIGNED_BYTE,new Uint8Array([0,0,255,255]))},this.texturePowerOfTwo=function(){return t.gl.generateMipmap(t.gl.TEXTURE_2D)},this.textureNoPowerOfTwo=function(){t.gl.texParameteri(t.gl.TEXTURE_2D,t.gl.TEXTURE_WRAP_S,t.gl.CLAMP_TO_EDGE),t.gl.texParameteri(t.gl.TEXTURE_2D,t.gl.TEXTURE_WRAP_T,t.gl.CLAMP_TO_EDGE),t.gl.texParameteri(t.gl.TEXTURE_2D,t.gl.TEXTURE_MIN_FILTER,t.gl.LINEAR)}}return Object(l.a)(e,[{key:"init",value:function(e){this.gl=e}}]),e}()),A="position",b="textureCoords",y="normal",E="transformationMatrix",T="viewMatrix",B="projectionMatrix",w="lightPosition",C="lightColor",M="lightAmbient",S="diffuseTexture",R="hasDiffuseTexture",N="\n    precision mediump float;\n    attribute vec3 ".concat(A,";\n    attribute vec2 ").concat(b,";\n    attribute vec3 ").concat(y,";\n\n    varying vec3 surfaceNormal;\n    varying vec3 lightVector;\n    varying vec2 pass_textureCoords;\n\n    uniform mat4 ").concat(E,";\n    uniform mat4 ").concat(T,";\n    uniform mat4 ").concat(B,";\n    uniform vec3 ").concat(w,";\n\n    vec4 getWorldPosition() {\n        return ").concat(B," * ").concat(T," * ").concat(E," * vec4(").concat(A,", 1.0);\n    }\n\n    vec3 getSurfaceNormal() {\n        return (").concat(B," * ").concat(T," * ").concat(E," * vec4(").concat(y,", 0.0)).xyz;\n    }\n\n    void main(void) {\n        vec4 worldPos = getWorldPosition();\n        surfaceNormal = getSurfaceNormal();\n        lightVector = ").concat(w," - worldPos.xyz;\n        gl_Position = worldPos;\n        pass_textureCoords = ").concat(b,";\n    }\n\n"),O="\n    precision mediump float;\n    \n    varying vec2 pass_textureCoords;\n    varying vec3 surfaceNormal;\n    varying vec3 lightVector;\n    \n    uniform sampler2D ".concat(S,";\n    uniform int ").concat(R,";\n\n    uniform float ").concat(M,";\n    uniform vec3 ").concat(C,";\n\n    vec4 getDiffuseTexture(){\n        if(").concat(R," == 1) {\n            return texture2D(").concat(S,",pass_textureCoords);\n        }\n        return vec4(0.4, 0.4, 0.4, 1.0);\n    }\n\n    float _nDot() {\n        vec3 unitNormal = normalize(surfaceNormal);\n        vec3 unitLightVector = normalize(lightVector);\n        return dot(unitNormal, unitLightVector);\n    }\n\n    vec4 diffuseLighting(){\n        float brightness = max(_nDot(), ").concat(M,");\n        return vec4(").concat(C,".rgb * brightness, 1.0);\n    }\n\n    void main(void) {\n        gl_FragColor = getDiffuseTexture() * diffuseLighting();\n    }\n"),D=function e(){var t=this;Object(s.a)(this,e),this.compileStatus=function(e){x.gl.getShaderParameter(e,x.gl.COMPILE_STATUS)||console.error(x.gl.getShaderInfoLog(e))},this.use=function(){x.useProgram(t.program)},this.enablePosition=function(){x.enableVertexAttribArray(t.positionAttribute),x.pointToAttribute(t.positionAttribute,3)},this.enableTextureCoords=function(){x.enableVertexAttribArray(t.textureCoordsAttribute),x.pointToAttribute(t.textureCoordsAttribute,2)},this.enableNormals=function(){x.enableVertexAttribArray(t.normalAttribute),x.pointToAttribute(t.normalAttribute,3)},this.enableTransformationMatrix=function(e){x.uploadMatrix4fv(t.transformationMatrix,e)},this.enableViewProjectionMatrices=function(e,n){x.uploadMatrix4fv(t.viewMatrix,e),x.uploadMatrix4fv(t.projectionMatrix,n)},this.enableLight=function(e){x.uploadVec3f(t.lightPosition,e.getPosition()),x.uploadVec3f(t.lightColor,e.getColor()),x.uploadFloat(t.lightAmbient,e.getAmbient())};var n=x.createVertexShader();x.addShaderSource(n,N),x.compileShader(n),this.compileStatus(n);var a=x.createFragmentShader();x.addShaderSource(a,O),x.compileShader(a),this.compileStatus(a);var r=x.createShaderProgram();x.attachShaderToProgram(r,n),x.attachShaderToProgram(r,a),x.linkProgram(r),this.positionAttribute=x.getAttribLocation(r,A),this.textureCoordsAttribute=x.getAttribLocation(r,b),this.normalAttribute=x.getAttribLocation(r,y),this.transformationMatrix=x.getUniformLocation(r,E),this.viewMatrix=x.getUniformLocation(r,T),this.projectionMatrix=x.getUniformLocation(r,B),this.lightPosition=x.getUniformLocation(r,w),this.lightColor=x.getUniformLocation(r,C),this.lightAmbient=x.getUniformLocation(r,M),this.diffuseTexture=x.getUniformLocation(r,S),this.hasDiffuseTexture=x.getUniformLocation(r,R),this.program=r},k=function(e,t,n){this.name=e,this.children=[],this.modelId=n,this.modelInstance=t};k.prototype.setParent=function(e){if(this.parent){var t=this.parent.children.indexOf(this);t>=0&&this.parent.children.splice(t,1)}e&&e.children.push(this),this.parent=e},k.prototype.updateWorldMatrix=function(e){var t=this.modelInstance;e?p.a.multiply(t.worldMatrix,e,t.transformationMatrix):p.a.copy(t.model.worldMatrix,t.transformationMatrix);var n=t.worldMatrix;this.children.forEach(function(e){e.updateWorldMatrix(n)})};var P=k,_=function(e){return e*(Math.PI/180)},j=function(e,t,n,a,r,i,o,s,l){var c=[];return p.a.identity(c),p.a.translate(c,c,p.b.fromValues(e,t,n)),p.a.rotateX(c,c,_(a)),p.a.rotateY(c,c,_(r)),p.a.rotateZ(c,c,_(i)),p.a.scale(c,c,p.b.fromValues(o,s,l)),c},I=function e(t,n,a,r,i,o){var l=this;Object(s.a)(this,e),this.setNode=function(e){l.node=e},this.setPosition=function(e,t,n){l.x=e,l.y=t,l.z=n,l.generateTransformationMatrix(),l.generateWorldMatrix()},this.setRotation=function(e,t,n){l.rx=e,l.ry=t,l.rz=n,l.generateTransformationMatrix(),l.generateWorldMatrix()},this.setScale=function(e,t,n){l.sx=e,l.sy=t,l.sz=n,l.generateTransformationMatrix(),l.generateWorldMatrix()},this.updateRotation=function(e,t,n){l.rx+=e,l.ry+=t,l.rz+=n,l.generateTransformationMatrix(),l.generateWorldMatrix()},this.translate=function(e,t,n){l.x+=e,l.y+=t,l.z+=n,l.generateTransformationMatrix(),l.generateWorldMatrix()},this.scale=function(e,t,n){l.sx*=e,l.sy*=t,l.sz*=n,l.generateTransformationMatrix(),l.generateWorldMatrix()},this.generateTransformationMatrix=function(){l.transformationMatrix=j(l.x,l.y,l.z,l.rx,l.ry,l.rz,l.sx,l.sy,l.sz)},this.generateWorldMatrix=function(){l.worldMatrix=j(l.x,l.y,l.z,l.rx,l.ry,l.rz,l.sx,l.sy,l.sz)},this.getTransformationMatrix=function(){return l.transformationMatrix},this.getWorldMatrix=function(){return l.worldMatrix},this.x=t,this.y=n,this.z=a,this.rx=r,this.ry=i,this.rz=o,this.sx=1,this.sy=1,this.sz=1,this.generateTransformationMatrix(),this.generateWorldMatrix()},U=function(){function e(){var t=this;Object(s.a)(this,e),this.registerNewModel=function(e,n){t.models[n]||(t.models[n]={type:e,instances:[]})},this.addInstance=function(e,n,a){t.models[n].instances.push(e),t.addToTree(a,e,n)},this.preRender=function(){x.viewport(),x.depthTest(!0)},this.render=function(e,n){t.preRender(),t.shader.use(),t.shader.enableLight(e),n.enable(t.shader),t.originNode.updateWorldMatrix(t.originNode.modelInstance.worldMatrix),t.drawObjects()},this.shader=new D,this.models={};var n=new I(0,0,0,0,0,0);this.originNode=new P("origin",n,null),this.tree=this.originNode}return Object(l.a)(e,[{key:"addToTree",value:function(e,t,n){new P(e,t,n).setParent(this.originNode)}},{key:"updateWorldMatrix",value:function(e){var t=e.modelInstance;e.modelId?p.a.multiply(t.worldMatrix,t.getTransformationMatrix(),t.getWorldMatrix()):p.a.copy(t.worldMatrix,t.transformationMatrix),e.children.forEach(function(e){this.updateWorldMatrix(e)},this)}},{key:"drawNode",value:function(e){this.models[e.modelId].type.use(this.shader);var t=e.modelInstance.getWorldMatrix();this.shader.enableTransformationMatrix(t),x.drawTriangles(this.models[e.modelId].type.indices.length)}},{key:"traverse",value:function(e){for(var t=0;t<e.length;t++)this.drawNode(e[t]),e[t].children.length>0&&this.traverse(e[t].children)}},{key:"drawObjects",value:function(){this.traverse(this.tree.children)}}]),e}(),L=function e(){var t=this;Object(s.a)(this,e),this.loadTexture=function(e){var n=new Image;n.setAttribute("crossOrigin",""),n.onload=function(){return t.onLoad(n)},n.src=e},this.onLoad=function(e){x.bindTexture(t.texture),x.defineTexture(e),t.isPowerOf2(e.width)&&t.isPowerOf2(e.height)?x.texturePowerOfTwo():x.textureNoPowerOfTwo(),t.done=!0},this.isPowerOf2=function(e){return 0===(e&e-1)},this.enable=function(){return x.bindTexture(t.texture)},this.hasTexture=function(){return!!t.done},this.texture=x.createTexture(),x.bindTexture(this.texture),x.defineDummyTexture()},z=function e(){var t=this;Object(s.a)(this,e),this.addDiffuse=function(e){return t.diffuse.loadTexture(e),t},this._enableDiffuse=function(e){x.activeTexture(0),t.diffuse.enable(),x.uploadInt(e.diffuseTexture,0),x.uploadBool(e.hasDiffuseTexture,t.diffuse.hasTexture())},this.enable=function(e){t._enableDiffuse(e)},this.diffuse=new L},F=function e(t,n,a,r){var i=this;Object(s.a)(this,e),this._genTextureCoordBuffer=function(){i.textureCoordBuffer=x.createBuffer(),x.bindArrayBuffer(i.textureCoordBuffer),x.addArrayBufferData(i.textureCoords),x.unbindArrayBuffer()},this._genNormalBuffer=function(){i.normalBuffer=x.createBuffer(),x.bindArrayBuffer(i.normalBuffer),x.addArrayBufferData(i.normals),x.unbindArrayBuffer()},this._genVertexBuffer=function(){i.vertexBuffer=x.createBuffer(),x.bindArrayBuffer(i.vertexBuffer),x.addArrayBufferData(i.vertices),x.unbindArrayBuffer()},this._genIndexBuffer=function(){i.indexBuffer=x.createBuffer(),x.bindElementArrayBuffer(i.indexBuffer),x.addElementArrayBufferData(i.indices),x.unbindElementArrayBuffer()},this.addMaterial=function(e){i.material=e},this.use=function(e){x.bindArrayBuffer(i.vertexBuffer),e.enablePosition(),x.bindArrayBuffer(i.textureCoordBuffer),e.enableTextureCoords(),x.bindArrayBuffer(i.normalBuffer),e.enableNormals(),x.bindElementArrayBuffer(i.indexBuffer),i.material.enable(e)},this.vertices=t,this.indices=n,this.normals=a,this.textureCoords=r,this._genTextureCoordBuffer(),this._genVertexBuffer(),this._genIndexBuffer(),this._genNormalBuffer(),this.material=new z},G={vertices:[-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1],indices:[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23],normals:[0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0],textureCoords:[0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1]},V=function e(t,n,a,r,i,o,l){var c=this;Object(s.a)(this,e),this.getPosition=function(){return p.b.fromValues(c.x,c.y,c.z)},this.getColor=function(){return p.b.fromValues(c.r,c.g,c.b)},this.getAmbient=function(){return c.ambient},this.x=t,this.y=n,this.z=a,this.r=r,this.g=i,this.b=o,this.ambient=l},Y=new function e(){var t=this;Object(s.a)(this,e),this.init=function(){var e=0,n=0,a=!1;x.gl.canvas.onwheel=function(e){t.onWheelListeners.forEach(function(t){t.onWheel(e)})},x.gl.canvas.onmousedown=function(t){e=t.clientX,n=t.clientY,a=!0},x.gl.canvas.onmouseup=function(){a=!1},x.gl.canvas.onmousemove=function(r){if(a){var i=e-r.clientX,o=n-r.clientY;e=r.clientX,n=r.clientY,t.onDragListeners.forEach(function(e){e.onDrag(i,o)})}}},this.subscribeToDrag=function(e){t.onDragListeners.push(e)},this.subscribeToWheel=function(e){t.onWheelListeners.push(e)},this.onWheelListeners=[],this.onDragListeners=[]},W=function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:.1,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1e3,d=arguments.length>8&&void 0!==arguments[8]?arguments[8]:40;Object(s.a)(this,e),this.onDrag=function(e,n){t.x+=.01*e,t.y-=.01*n,t.generateMatrices()},this.onWheel=function(e){t.z+=.2*e.deltaY,t.generateMatrices()},this.enable=function(e){e.enableViewProjectionMatrices(t.viewMatrix,t.projectionMatrix)},this.generateMatrices=function(){t.viewMatrix=t.createViewMatrix(),t.projectionMatrix=t.createProjectionMatrix()},this.createViewMatrix=function(){var e=[];return p.a.identity(e),p.a.rotateX(e,e,_(t.pitch)),p.a.rotateY(e,e,_(t.yaw)),p.a.rotateZ(e,e,_(t.roll)),p.a.translate(e,e,p.b.fromValues(-t.x,-t.y,-t.z)),e},this.createProjectionMatrix=function(){var e=x.gl.canvas.width/x.gl.canvas.height,n=[];return p.a.perspective(n,_(t.fov),e,t.near,t.far),n},this.x=n,this.y=a,this.z=r,this.pitch=i,this.roll=l,this.yaw=o,this.near=c,this.far=u,this.fov=d,this.generateMatrices(),Y.subscribeToDrag(this),Y.subscribeToWheel(this)};function X(e){this._sender=e,this._listeners=[]}X.prototype={attach:function(e){return this._listeners.push(e),e},detach:function(e){this._listeners.splice(this._listeners.indexOf(e),1)},notify:function(e){for(var t=0;t<this._listeners.length;t++)this._listeners[t](this._sender,e)}};var Q=X;function q(e,t){var a=this;if(this.canvas=document.querySelector("#".concat(e)),this.webglInstance=t,this.canvas&&(this.gl=this.canvas.getContext("webgl"),this.gl)){x.init(this.gl),Y.init(),this.camera=new W(0,2,40),this.light=new V(100,-100,-100,1,1,1,.4);var r=G.vertices,i=G.indices,o=G.normals,s=G.textureCoords;this.modelRenderer=new U;var l=function(e,t){var l=new z;switch(t){case"green":l.addDiffuse(n(36));break;case"blue":l.addDiffuse(n(37));break;case"red":l.addDiffuse(n(38))}var c=new F(r,i,o,s);c.addMaterial(l),a.modelRenderer.registerNewModel(c,e)};l("cubeR","red"),l("cubeB","blue"),l("cubeG","green");var c=new I(0,0,0,0,0,0),u=new I(3,0,0,0,0,0),d=new I(-3,0,0,0,0,0);this.modelRenderer.addInstance(c,"cubeR","redBox"),this.modelRenderer.addInstance(u,"cubeB","blueBox"),this.modelRenderer.addInstance(d,"cubeG","greenBox"),this.Update=new Q(this),this.webglInstance.UpdateEvent=this.Update,this.time=0,this.backgroundColor=[1,1,1];window.requestAnimationFrame(function e(){a.time+=.005,x.clear.apply(x,Object(v.a)(a.backgroundColor).concat([1])),c.translate(0,.02*Math.sin(8*a.time),0);var t=.01*Math.sin(16*a.time)+1;d.scale(t,t,t),a.Update.notify(a.webglInstance),a.modelRenderer.render(a.light,a.camera),window.requestAnimationFrame(e)})}}var J=n(8),K=n.n(J),H=(n(39),n(41),n(17)),Z=n.n(H),$=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).renderCollapse=function(){var e=n.props.index;if(e.children&&e.children.length){var t=e.node.collapsed;return r.a.createElement("span",{className:K()("collapse",t?"caret-right":"caret-down"),onMouseDown:function(e){return e.stopPropagation()},onClick:n.handleCollapse})}return null},n.renderChildren=function(){var e=n.props,a=e.index,i=e.tree,o=e.dragging;if(a.children&&a.children.length){var s={paddingLeft:n.props.paddingLeft};return r.a.createElement("div",{className:"children",style:s},a.children.map(function(e){var a=i.getIndex(e);return r.a.createElement(t,{tree:i,index:a,key:a.id,dragging:o,paddingLeft:n.props.paddingLeft,onCollapse:n.props.onCollapse,onDragStart:n.props.onDragStart})}))}return null},n.handleCollapse=function(e){e.stopPropagation();var t=n.props.index.id;n.props.onCollapse&&n.props.onCollapse(t)},n.handleMouseDown=function(e){var t=n.props.index.id,a=n.innerRef.current;n.props.onDragStart&&n.props.onDragStart(t,a,e)},n.innerRef=r.a.createRef(),n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.tree,n=e.index,a=e.dragging,i=n.node;return r.a.createElement("div",{className:K()("m-node",{placeholder:n.id===a}),style:{}},r.a.createElement("div",{className:"inner",ref:this.innerRef,onMouseDown:this.handleMouseDown},this.renderCollapse(),t.renderNode(i)),i.collapsed?null:this.renderChildren())}}]),t}(a.Component),ee=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).init=function(e){var t=new Z.a(e.tree);return t.isNodeCollapsed=e.isNodeCollapsed,t.renderNode=e.renderNode,t.changeNodeCollapsed=e.changeNodeCollapsed,t.updateNodesPosition(),{tree:t,dragging:{id:null,x:null,y:null,w:null,h:null}}},n.getDraggingDom=function(){var e=n.state,t=e.tree,a=e.dragging;if(a&&a.id){var i=t.getIndex(a.id),o={top:a.y,left:a.x,width:a.w};return r.a.createElement("div",{className:"m-draggable",style:o},r.a.createElement($,{tree:t,index:i,paddingLeft:n.props.paddingLeft}))}return null},n.dragStart=function(e,t,a){0===a.button&&(n.dragging={id:e,w:t.offsetWidth,h:t.offsetHeight,x:t.offsetLeft,y:t.offsetTop},n._startX=t.offsetLeft,n._startY=t.offsetTop,n._offsetX=a.clientX,n._offsetY=a.clientY,n._start=!0,window.addEventListener("mousemove",n.drag),window.addEventListener("mouseup",n.dragEnd))},n.drag=function(e){n._start&&(n.setState({dragging:n.dragging}),n._start=!1);var t=n.state.tree,a=n.state.dragging,r=n.props.paddingLeft,i=null,o=t.getIndex(a.id),s=o.node.collapsed,l=n._startX,c=n._startY,u=n._offsetX,d=n._offsetY,h={x:l+e.clientX-u,y:c+e.clientY-d};a.x=h.x,a.y=h.y;var f=a.x-r/2-(o.left-2)*r,g=a.y-a.h/2-(o.top-2)*a.h;if(f<0)o.parent&&!o.next&&(i=t.move(o.id,o.parent,"after"));else if(f>r&&o.prev){var m=t.getIndex(o.prev).node;m.collapsed||m.leaf||(i=t.move(o.id,o.prev,"append"))}if(i&&(o=i,i.node.collapsed=s,a.id=i.id),g<0){var p=t.getNodeByTop(o.top-1);i=t.move(o.id,p.id,"before")}else if(g>a.h)if(o.next){var v=t.getIndex(o.next);i=v.children&&v.children.length&&!v.node.collapsed?t.move(o.id,o.next,"prepend"):t.move(o.id,o.next,"after")}else{var x=t.getNodeByTop(o.top+o.height);x&&x.parent!==o.id&&(i=x.children&&x.children.length&&!x.node.collapsed?t.move(o.id,x.id,"prepend"):t.move(o.id,x.id,"after"))}i&&(i.node.collapsed=s,a.id=i.id),n.setState({tree:t,dragging:a})},n.dragEnd=function(){n.setState({dragging:{id:null,x:null,y:null,w:null,h:null}}),n.change(n.state.tree),window.removeEventListener("mousemove",n.drag),window.removeEventListener("mouseup",n.dragEnd)},n.change=function(e){n._updated=!0,n.props.onChange&&n.props.onChange(e.obj)},n.toggleCollapse=function(e){var t=n.state.tree,a=t.getIndex(e).node;a.collapsed=!a.collapsed,t.updateNodesPosition(),n.setState({tree:t}),n.change(t)},n.state=n.init(e),n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentWillReceiveProps",value:function(e){this._updated?this._updated=!1:this.setState(this.init(e))}},{key:"render",value:function(){var e=this.state.tree,t=this.state.dragging,n=this.getDraggingDom();return r.a.createElement("div",{className:"m-tree"},n,r.a.createElement($,{tree:e,index:e.getIndex(1),key:1,paddingLeft:this.props.paddingLeft,onDragStart:this.dragStart,onCollapse:this.toggleCollapse,dragging:t&&t.id}))}}]),t}(a.Component);ee.defaultProps={paddingLeft:20};var te=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).renderNode=function(e){return r.a.createElement("span",{className:K()("node",{"is-active":e===n.state.active}),onClick:n.onClickNode.bind(null,e)},e.name)},n.onClickNode=function(e){n.setState({active:e}),n.props.onSelect(e)},n.handleChange=function(e){n.setState({tree:e})},n.updateTree=function(){var e=n.state.tree;e.children.push({module:"test"}),n.setState({tree:e})},n.state={active:null,tree:e.treeData},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({tree:e.treeData})}},{key:"render",value:function(){return r.a.createElement("div",{className:"tree"},r.a.createElement(ee,{paddingLeft:20,tree:this.state.tree,onChange:this.handleChange,isNodeCollapsed:this.isNodeCollapsed,renderNode:this.renderNode}))}}]),t}(a.Component),ne=(n(14),function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).onNodeSelect=function(e){switch(n.state.type){case"Position":n.setState({x:e.position[0],y:e.position[1],z:e.position[2]});break;case"Rotation":n.setState({x:e.rotation[0],y:e.rotation[1],z:e.rotation[2]});break;case"Scale":n.setState({x:e.scale[0],y:e.scale[1],z:e.scale[2]})}},n.xOnChange=function(e){var t=""==e.target.value?0:e.target.value;n.handleChange(t,0)},n.yOnChange=function(e){var t=""==e.target.value?0:e.target.value;n.handleChange(t,1)},n.zOnChange=function(e){var t=""==e.target.value?0:e.target.value;n.handleChange(t,2)},n.handleClick=function(){var e=n.myParseFloat(n.state.x),t=n.myParseFloat(n.state.y),a=n.myParseFloat(n.state.z);switch(n.state.type){case"Position":n.props.translate(e,t,a);break;case"Rotation":n.props.rotate(e,t,a);break;case"Scale":n.props.scale(e,t,a);break;case"Background":n.props.changeBG(e,t,a)}},n.onNodeSelect=n.onNodeSelect,"Scale"===e.lineType?n.state={type:e.lineType,x:1,y:1,z:1}:n.state={type:e.lineType,x:0,y:0,z:0},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"line"},r.a.createElement("button",{onClick:this.handleClick},this.state.type),r.a.createElement("input",{ref:"xx",value:this.state.x,placeholder:"x",onChange:this.xOnChange}),r.a.createElement("input",{ref:"yy",value:this.state.y,placeholder:"y",onChange:this.yOnChange}),r.a.createElement("input",{ref:"zz",value:this.state.z,placeholder:"z",onChange:this.zOnChange})))}},{key:"handleChange",value:function(e,t){var n,a,r;0==t?(this.setState({x:e}),n=this.myParseFloat(e),a=this.state.y,r=this.state.z):1==t?(this.setState({y:e}),a=this.myParseFloat(e),n=this.state.x,r=this.state.z):2==t&&(this.setState({z:e}),r=this.myParseFloat(e),n=this.state.x,a=this.state.y),this.props.action(n,a,r)}},{key:"myParseFloat",value:function(e){for(;"0"===e[0]&&e.length>1;)e=e.substr(1);return parseFloat(e)}}]),t}(a.Component)),ae=(n(46),function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).xOnChange=function(e){n.setState({x:e.target.value}),n.props.changeBG(parseFloat(n.state.x)/255,parseFloat(n.state.y)/255,parseFloat(n.state.z)/255)},n.yOnChange=function(e){n.setState({y:e.target.value}),n.props.changeBG(parseFloat(n.state.x)/255,parseFloat(n.state.y)/255,parseFloat(n.state.z)/255)},n.zOnChange=function(e){n.setState({z:e.target.value}),n.props.changeBG(parseFloat(n.state.x)/255,parseFloat(n.state.y)/255,parseFloat(n.state.z)/255)},n.state={type:e.lineType,x:0,y:0,z:0},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"background-line"},r.a.createElement("h4",null,"Background Color"),r.a.createElement("input",{placeholder:"R",onChange:this.xOnChange}),r.a.createElement("input",{placeholder:"G",onChange:this.yOnChange}),r.a.createElement("input",{placeholder:"B",onChange:this.zOnChange})))}}]),t}(a.Component)),re=n(48),ie=n(49),oe=n(50),se=function(e,t,n,a,r,i,o,s,l){this.position=p.b.fromValues(e,t,n),this.rotation=p.b.fromValues(a,r,i),this.scale=p.b.fromValues(o,s,l)},le=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).nodeToTransform=function(e){var t=e.modelInstance;return new se(t.x,t.y,t.z,t.rx,t.ry,t.rz,t.sx,t.sy,t.sz)},n.treeSelect=function(e){n.setState({selectedNode:e}),n.selectedChanged.notify(e)},n.onKeyPressed=function(e){46==e.keyCode&&n.deleteFromTree(n.state.selectedNode)},n.deleteFromTree=function(e){var t=n.state.tree.children,a=e.name,r=n.functiontofindIndexByKeyValue(t,"name",a);t.splice(r,1)},n.changeBG=function(e,t,a){n.scene&&(n.scene.backgroundColor=[e,t,a])},n.setPosition=function(e,t,a){var r=n.state.selectedNode;r&&r.modelInstance.setPosition(e,t,a)},n.setRotation=function(e,t,a){var r=n.state.selectedNode;r&&r.modelInstance.setRotation(e,t,a)},n.setScale=function(e,t,a){var r=n.state.selectedNode;r&&r.modelInstance.setScale(e,t,a)},n.translate=function(e,t,a){var r=n.state.selectedNode;r&&r.modelInstance.translate(e,t,a)},n.rotate=function(e,t,a){var r=n.state.selectedNode;r&&r.modelInstance.updateRotation(e,t,a)},n.scale=function(e,t,a){var r=n.state.selectedNode;r&&(0==e&&(e=1),0==t&&(t=1),0==a&&(a=1),r.modelInstance.scale(e,t,a))},n.handleClickGreen=function(){var e=n.scene,t=Math.floor(10*Math.random()-5),a=Math.floor(10*Math.random()-5),r=Math.floor(10*Math.random()-5),i=new I(t,a,r,t,a,r);e.modelRenderer.addInstance(i,"cubeG","green".concat(n.state.counter.toString())),n.setState({tree:e.modelRenderer.tree,counter:n.state.counter+1})},n.handleClickBlue=function(){var e=n.scene,t=Math.floor(10*Math.random()-5),a=Math.floor(10*Math.random()-5),r=Math.floor(10*Math.random()-5),i=new I(t,a,r,t,a,r);e.modelRenderer.addInstance(i,"cubeB","blue".concat(n.state.counter.toString())),n.setState({tree:e.modelRenderer.tree,counter:n.state.counter+1})},n.handleClickRed=function(){var e=n.scene,t=Math.floor(10*Math.random()-5),a=Math.floor(10*Math.random()-5),r=Math.floor(10*Math.random()-5),i=new I(t,a,r,t,a,r);e.modelRenderer.addInstance(i,"cubeR","red".concat(n.state.counter.toString())),n.setState({tree:e.modelRenderer.tree,counter:n.state.counter+1})},n.findObject=function(e,t){var a;if(null!=e&&"origin"!=(a=e.name))return n.state.tree.children.find(function(e){return e.name==a})},n.state={tree:{},counter:0,selectedNode:null,selectedTransform:new se(1,1,1,0,0,0,1,1,1),translateBox:!1,rotateBox:!1,scaleBox:!1},n.scene=null,n.handleClick2=n.handleClick2.bind(Object(m.a)(Object(m.a)(n))),n.handleCheckBoxChange=n.handleCheckBoxChange.bind(Object(m.a)(Object(m.a)(n))),n.selectedChanged=new Q(Object(m.a)(Object(m.a)(n))),n.selectedChanged.attach(function(e,t){e._treeSelect(t)}),n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.UpdateEvent=null,this.scene=new q("webgl",this),this.Main=this.UpdateEvent.attach(function(e,t){if(t.state.selectedNode){var n=e.time;if(t.state.rotateBox&&t.state.selectedNode.modelInstance.updateRotation(0,0,.3),t.state.scaleBox){var a=.01*Math.sin(16*n)+1;t.state.selectedNode.modelInstance.scale(a,a,a)}t.state.translateBox&&t.state.selectedNode.modelInstance.translate(0,.02*Math.sin(8*n),0)}}),this.setState({tree:this.scene.modelRenderer.tree,counter:this.state.counter+1})}},{key:"_treeSelect",value:function(e){var t=this.nodeToTransform(e);this.setState({selectedTransform:t}),this.refs.linePos.onNodeSelect(t),this.refs.lineRot.onNodeSelect(t),this.refs.lineScale.onNodeSelect(t)}},{key:"functiontofindIndexByKeyValue",value:function(e,t,n){for(var a=0;a<e.length;a++)if(e[a][t]==n)return a;return null}},{key:"render",value:function(){return r.a.createElement("div",{onKeyDown:this.onKeyPressed,tabIndex:"0",className:"allDivs"},r.a.createElement("div",{className:"leftDiv"},r.a.createElement(te,{treeData:this.state.tree,onSelect:this.treeSelect})),r.a.createElement("div",{className:"midDiv"},r.a.createElement("canvas",{id:"webgl",width:"700",height:"700",style:{border:"1px solid black"}}),r.a.createElement("div",{className:"cubesContainer"},r.a.createElement("img",{onClick:this.handleClickGreen,src:re}),r.a.createElement("img",{onClick:this.handleClickBlue,src:ie}),r.a.createElement("img",{onClick:this.handleClickRed,src:oe}))),r.a.createElement("div",{className:"rightDiv"},r.a.createElement("div",{className:"transformDiv"},r.a.createElement("h3",null,"Transform"),r.a.createElement(ne,{ref:"linePos",lineType:"Position",values:this.state.selectedTransform.position,translate:this.translate,action:this.setPosition}),r.a.createElement(ne,{ref:"lineRot",lineType:"Rotation",values:this.state.selectedTransform.rotation,rotate:this.rotate,action:this.setRotation}),r.a.createElement(ne,{ref:"lineScale",lineType:"Scale",values:this.state.selectedTransform.scale,scale:this.scale,action:this.setScale}),r.a.createElement("div",null,r.a.createElement("label",null,"Translate Animation:",r.a.createElement("input",{name:"translateBox",type:"checkbox",checked:this.state.translateBox,onChange:this.handleCheckBoxChange})),r.a.createElement("br",null),r.a.createElement("label",null,"Rotate Animation:",r.a.createElement("input",{name:"rotateBox",type:"checkbox",checked:this.state.rotateBox,onChange:this.handleCheckBoxChange})),r.a.createElement("br",null),r.a.createElement("label",null,"Scale Animation:",r.a.createElement("input",{name:"scaleBox",type:"checkbox",checked:this.state.scaleBox,onChange:this.handleCheckBoxChange})),r.a.createElement("br",null))),r.a.createElement("div",null,r.a.createElement(ae,{lineType:"Background",values:this.scene?this.scene.backgroundColor:[1,1,1],changeBG:this.changeBG}))))}},{key:"handleClick2",value:function(e){var t=this.state.selectedNode;t&&t.modelInstance.translate(1,0,0)}},{key:"handleCheckBoxChange",value:function(e){var t=e.target,n="checkbox"===t.type?t.checked:t.value,a=t.name;this.setState(Object(g.a)({},a,n))}}]),t}(r.a.Component);n(51);function ce(){var e=Object(h.a)([""]);return ce=function(){return e},e}var ue=f.a.div(ce()),de=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={checked:!1},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(ue,null,r.a.createElement(le,null))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(de,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[30,2,1]]]);
//# sourceMappingURL=main.3daea86d.chunk.js.map